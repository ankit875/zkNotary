# Verifier

This directory contains the source code for the Verifier component of the zkNotary project. It is intended to build and publish a Javascript npm package that can be used to verify arbitrary proofs generated by TLSNotary.

The verifier is written in Rust, so we need to compile it to WebAssembly and then package it as an npm package before it can be used within a Javascript application. For this, we use the [wasm-pack](https://rustwasm.github.io/docs/wasm-pack/introduction.html) npm package.

## Prerequisites

- Rust
- Cargo
- wasm-pack

Note: This project requires a clang version newer than 16.0.0 to compile ring to wasm. If not, you will run into warning: error: unable to create target: 'No available targets are compatible with triple "wasm32-unknown-unknown"'

## File Structure

- `src/lib.rs`: This is the main library file for the Verifier.
- `src/utils.rs`: This file contains utility functions used by the Verifier.
- `pkg`: Autogenerated directory where the npm package code lives.
- `examples/node`: A sample node application that showcases how to use the verifier package. For more information see the sample application's [README](./examples/node/README.md) file.

## Usage

1. Install wasm-pack

```sh
npm install -g wasm-pack
```

2. Optional: For Mac users with a version of clang older than 16.0.0, you can use Homebrew to install `llvm` and then use it to compile the project.

```sh
brew install llvm
echo 'export PATH="/path/to/your/newly/installed/llvm/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

3. Build the wasm project

```sh
wasm-pack build --target nodejs
```

This creates a new `pkg` directory with the wasm package ready to publish to npmjs.com.

4. Publish your npm package

```sh
cd pkg
npm publish
```

## Contributing

Contributions are welcome. Please submit a pull request or create an issue to discuss the changes you want to make.

## Acknowledgements

This project is inspired by and borrows code from the following projects:

- [Proof Viz](https://github.com/tlsnotary/proof_viz)
- [TLSN](https://github.com/tlsnotary/tlsn)

We are grateful to the authors of these projects for their work.

## License

Apache
